<%-include('../admin/layouts/header.ejs') %>

<%-include('../admin/layouts/sidebar.ejs') %>

<%-include('../admin/layouts/navbar.ejs') %>



        <!--============================ Adding categories table=============== -->
        <div class="main-panel">
          <div class="content-wrapper">

            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h2 class="card-title" style="text-align: center;">CATEGORIES</h2>
                  <div class="table-responsive">
                    <table class="table table-dark">
                      <thead>
                        <tr>
                          <th> # </th>
                          <th> Category </th>
                          <th> Category Description</th>
                          <th> Edit </th>
                          <th> Action </th>
                        </tr>
                      </thead>
                      
                 

                    <% if (Category.length > 0) {
                      for (let i = 0; i < Category.length; i++) { %>
                          <tr>
                              <td>*</td>
                              <td><%= Category[i].categoryName %></td>
                              <td><%= Category[i].categoryDescription %></td>
                              <td> <a href="/admin/edit_category?id=<%= Category[i]._id%>">
                                <button type="button" class="btn btn-outline-secondary btn-icon-text">
                                  Edit <i class="mdi mdi-file-check btn-icon-append"></i>
                                </button>
                              </a>
                              </td>
                              <td>
                                  <% if (Category[i].is_listed === false) { %>
                                    <a href="/admin/unlist_category?id=<%= Category[i]._id %>">
                                      <button type="button" class="btn btn-inverse-success btn-fw">
                                        List
                                      </button>
                                    </a>
                                  <% } else { %>
                                    <a href="/admin/unlist_category?id=<%= Category[i]._id %>">
                                      <button type="button" class="btn btn-inverse-danger btn-fw">
                                        Unlist
                                      </button>
                                    </a> 
                                  <% } %>
                              </td>
                          </tr>
                      <% }
                  } %>
                  
                    
                     </table>
                  </div>
                  <div class="pagination" style="display: flex; justify-content: center;">
                    <% if (currentPage > 1) { %>
                      <a href="/admin/view_category?page=<%= currentPage - 1 %>" class="page-link"> Previous</a>
                    <% } %>
                    <% for (let i = 1; i <= totalPages; i++) { %>
                      <a href="/admin/view_category?page=<%= i %>" class="<%= i === currentPage ? 'active' : '' %>"><%= i %></a>
                    <% } %>
                    <% if (currentPage < totalPages) { %>
                      &nbsp; <a href="/admin/view_category?page=<%= currentPage + 1 %>" class="page-link"> Next</a>
                    <% } %>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
       
          <!-- partial -->
        </div>
        <!-- main-panel ends -->

<%-include('../admin/layouts/footer.ejs') %>